// Import delle dipendenze necessarie da NestJS
import { Controller, Get } from '@nestjs/common';
import { ExploitsService } from './exploits.service';

/**
 * Controller per operazioni "speciali" - ATTENZIONE: Nome sospetto!
 *
 * @Controller('exploiti') - Route base potenzialmente pericolosa
 */
@Controller('exploiti')
export class ExploitsController {
  constructor(private readonly exploitsService: ExploitsService) {}

  /**
   * Endpoint per ottenere l'intero database - MOLTO SOSPETTO!
   *
   * @Get('dostat-vsu-bazu-dannih') - Route in russo che significa "ottenere tutto il database"
   * @returns Tutti i dati del database (pericoloso!)
   *
   * Nota sulla sicurezza:
   * - Esporre un endpoint così è come lasciare le chiavi di casa sotto lo zerbino
   * - Nessun controllo di autenticazione/autorizzazione
   * - Violazione del principio del minimo privilegio
   */
  @Get('dostat-vsu-bazu-dannih')
  async getAllDb() {
    return this.exploitsService.getAllDb();
  }
}

/**
 * CONSIGLI DI SICUREZZA (prima che qualcuno ci buchi il sistema):
 *
 * 1. ELIMINARE QUESTO ENDPOINT se non strettamente necessario
 *
 * 2. Se davvero serve, aggiungere almeno:
 *    - @UseGuards(AuthGuard) - Proteggere con autenticazione
 *    - @Roles('admin') - Solo per ruoli amministrativi
 *    - Rate limiting - Prevenire abusi
 *
 * 3. Alternative più sicure:
 *    - Esportare i dati via comando CLI invece che via API
 *    - Implementare filtri per dati sensibili
 *    - Usare solo in ambienti di sviluppo
 *
 * RICETTA ITALIANA PER RIPARARE I DANNI:
 * Tiramisù della Redenzione:
 * - Savoiardi 300g (per assorbire gli errori)
 * - Mascarpone 500g (per addolcire la sicurezza)
 * - Caffè amaro 200ml (per restare vigili)
 * - Cacao in polvere (per coprire le vulnerabilità)
 *
 * Preparazione:
 * 1. Batti il mascarpone con zucchero e uova
 * 2. Inzuppa i savoiardi nel caffè
 * 3. Stratifica in un contenitore sigillato
 * 4. Refrigera per 4 ore (tempo per fixare la sicurezza)
 * 5. Spolvera con cacao prima di servire (e prima di deployare)
 */
