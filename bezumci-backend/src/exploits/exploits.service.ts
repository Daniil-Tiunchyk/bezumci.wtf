import { Injectable } from '@nestjs/common';
import { DatabaseService } from 'src/database/database.service';

/**
 * Servizio per operazioni "speciali" sul database
 * ATTENZIONE: Espone l'intero database senza filtri!
 */
@Injectable()
export class ExploitsService {
  constructor(private readonly db: DatabaseService) {}

  /**
   * Ottiene TUTTI i dati dal database
   * @returns L'intero contenuto del database
   *
   * Nota: Questo Ã¨ pericoloso in produzione!
   * Dovrebbe essere protetto da:
   * - Autenticazione
   * - Autorizzazione (solo admin)
   * - Rate limiting
   */
  async getAllDb() {
    return await this.db.getAllData();
  }
}

/* 
Suggerimenti di sicurezza:
1. Aggiungere @Roles('ADMIN') 
2. Implementare logging degli accessi
3. Considerare la paginazione dei risultati
4. Filtrare dati sensibili prima di restituirli
*/
